<!DOCTYPE html>
<html>
<head>
	<title>Dug Hill Rod & Gun Club Membership Application</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		body {
			font-family: Arial, sans-serif;
			background-color: #2d3e2f;
			padding: 20px;
		}
		.container {
			max-width: 800px;
			margin: 0 auto;
			background-color: #f5f5f5;
			padding: 30px;
			border-radius: 8px;
			box-shadow: 0 2px 10px rgba(0,0,0,0.3);
		}
		h1 {
			text-align: center;
			color: #384839;
			margin-bottom: 30px;
		}
		.form-section {
			margin-bottom: 25px;
		}
		.section-title {
			font-size: 24px;
			font-weight: bold;
			color: #384839;
			margin-bottom: 15px;
			padding-bottom: 8px;
			border-bottom: 2px solid #384839;
			text-align: center;
		}
		.form-grid {
			display: grid;
			grid-template-columns: 150px 1fr;
			gap: 12px 15px;
			align-items: center;
		}
		label {
			font-weight: 500;
			color: #333;
		}
		input, select, textarea {
			padding: 8px;
			border: 1px solid #ccc;
			border-radius: 4px;
			font-size: 14px;
			font-family: Arial, sans-serif;
		}
		input:-webkit-autofill,
		input:-webkit-autofill:hover,
		input:-webkit-autofill:focus {
			-webkit-box-shadow: 0 0 0 1000px white inset;
			box-shadow: 0 0 0 1000px white inset;
		}
		input:focus, select:focus, textarea:focus {
			outline: none;
			border-color: #5a7a5c;
		}
		.required::after {
			content: " *";
			color: red;
		}
		.button-container {
			text-align: center;
			margin-top: 30px;
		}
		button {
			background-color: #5a7a5c;
			color: white;
			padding: 12px 40px;
			border: none;
			border-radius: 4px;
			font-size: 16px;
			cursor: pointer;
			transition: background-color 0.3s;
		}
		button:hover {
			background-color: #4a6a4c;
		}
		.success-message {
			background-color: #d4edda;
			color: #155724;
			padding: 15px;
			border-radius: 4px;
			margin-bottom: 20px;
			text-align: center;
		}
	</style>
</head>
<body>
	<div class="container">
		<div style="text-align:center; margin-bottom:20px;">
			<img src="{{ url_for('static', filename='Main_Logo-removebg-preview.png') }}" alt="Dug Hill Rod & Gun Club Logo" style="height:150px;">
		</div>
		<h1>Dug Hill Rod & Gun Club<br>Membership Application</h1>
		
		<!-- Success message removed: now handled by confirmation page -->
		
		<form method="POST">
			<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
			
			<div class="form-section">
				<div class="section-title">Personal Information</div>
				<div class="form-grid">
					<label for="first_name" class="required">First Name:</label>
					<input type="text" id="first_name" name="first_name" required>
					
					<label for="middle_name">Middle Name:</label>
					<input type="text" id="middle_name" name="middle_name">
					
					<label for="last_name" class="required">Last Name:</label>
					<input type="text" id="last_name" name="last_name" required>
					
					<label for="suffix">Suffix:</label>
					<input type="text" id="suffix" name="suffix" placeholder="Jr., Sr., III, etc.">
					
					<label for="nickname">Nickname:</label>
					<input type="text" id="nickname" name="nickname">
					
					<label class="required">Sex:</label>
					<div style="display:flex; gap:20px;">
						<label style="font-weight:normal; cursor:pointer;">
							<input type="radio" name="sex" value="M" required style="margin-right:5px;">Male
						</label>
						<label style="font-weight:normal; cursor:pointer;">
							<input type="radio" name="sex" value="F" required style="margin-right:5px;">Female
						</label>
					</div>
					
					<label for="date_of_birth" class="required">Date of Birth:</label>
					<input type="date" id="date_of_birth" name="date_of_birth" required>
				</div>
			</div>
			
			<div class="form-section">
				<div class="section-title">Contact Information</div>
				<div class="form-grid">
					<label for="email" class="required">Primary Email:</label>
					<input type="email" id="email" name="email" required>
					
					<label for="email2">Secondary Email:</label>
					<input type="email" id="email2" name="email2">
					
					<label for="phone" class="required">Primary Phone:</label>
					<input type="tel" id="phone" name="phone" placeholder="(XXX) XXX-XXXX" required>
					
					<label for="phone2">Secondary Phone:</label>
					<input type="tel" id="phone2" name="phone2" placeholder="(XXX) XXX-XXXX">
				</div>
			</div>
			
			<div class="form-section">
				<div class="section-title">Address</div>
				<div class="form-grid">
					<label for="address" class="required">Street Address:</label>
					<input type="text" id="address" name="address" required>
					
				<label for="city" class="required">City:</label>
				<input type="text" id="city" name="city" required>
				
				<label for="state" class="required">State:</label>
				<select id="state" name="state" required>
					<option value="">Select State</option>
					<option value="AL">AL</option>
					<option value="AK">AK</option>
					<option value="AZ">AZ</option>
					<option value="AR">AR</option>
					<option value="CA">CA</option>
					<option value="CO">CO</option>
					<option value="CT">CT</option>
					<option value="DE">DE</option>
					<option value="FL">FL</option>
					<option value="GA">GA</option>
					<option value="HI">HI</option>
					<option value="ID">ID</option>
					<option value="IL">IL</option>
					<option value="IN">IN</option>
					<option value="IA">IA</option>
					<option value="KS">KS</option>
					<option value="KY">KY</option>
					<option value="LA">LA</option>
					<option value="ME">ME</option>
					<option value="MD">MD</option>
					<option value="MA">MA</option>
					<option value="MI">MI</option>
					<option value="MN">MN</option>
					<option value="MS">MS</option>
					<option value="MO">MO</option>
					<option value="MT">MT</option>
					<option value="NE">NE</option>
					<option value="NV">NV</option>
					<option value="NH">NH</option>
					<option value="NJ">NJ</option>
					<option value="NM">NM</option>
					<option value="NY">NY</option>
					<option value="NC">NC</option>
					<option value="ND">ND</option>
					<option value="OH">OH</option>
					<option value="OK">OK</option>
					<option value="OR">OR</option>
					<option value="PA">PA</option>
					<option value="RI">RI</option>
					<option value="SC">SC</option>
					<option value="SD">SD</option>
					<option value="TN">TN</option>
					<option value="TX">TX</option>
					<option value="UT">UT</option>
					<option value="VT">VT</option>
					<option value="VA">VA</option>
					<option value="WA">WA</option>
					<option value="WV">WV</option>
					<option value="WI">WI</option>
					<option value="WY">WY</option>
					<option value="DC">DC</option>
				</select>
				
				<label for="zip" class="required">ZIP Code:</label>
				<input type="text" id="zip" name="zip" required pattern="[0-9]{5}">
			</div>
		</div>		<div class="form-section">
				<div class="section-title">Sponsorship</div>
				<div class="form-grid">
					<label for="sponsor">Sponsor:</label>
					<input type="text" id="sponsor" name="sponsor" placeholder="Current Associate, Active, or Life member who will sponsor you">
				</div>
			</div>
			
		<div class="form-section">
			<div class="section-title">Supplemental Questions</div>
			<p style="margin-bottom:20px; color:#555; font-style:italic;">Please answer honestly. These qualifications are not requirements for membership. We use this data for statistical purposes.</p>
			<div style="margin-bottom:20px; margin-top:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Do you have a MD Handgun Qualification License (HQL)?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="hql" value="Yes" required style="margin-right:5px;">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="hql" value="No" required style="margin-right:5px;">No
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="hql" value="Not a MD Resident" required style="margin-right:5px;">I am not a Maryland resident
					</label>
				</div>
			</div>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Do you have an Open Carry or Concealed Carry Permit in any state?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="carry_permit" value="Yes" required style="margin-right:5px;">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="carry_permit" value="No" required style="margin-right:5px;">No
					</label>
				</div>
			</div>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Have you completed a Hunter's Education Course?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="hunters_education" value="Yes" required style="margin-right:5px;">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="hunters_education" value="No" required style="margin-right:5px;">No
					</label>
				</div>
			</div>
		</div>
			
		<div class="form-section">
			<div class="section-title">Firearms Eligibility</div>
			<p style="margin-bottom:20px; color:#555; font-style:italic;">Please answer honestly. Answering "Yes" to any of these questions does not necessarily make you ineligible.</p>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Have you ever been convicted of, plead guilty to, plead no contest, or have been tried on an agreed statement of facts to a felony? If yes, please include details with application.</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="felony_conviction" value="Yes" required style="margin-right:5px;" onchange="toggleFelonyDetails()">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="felony_conviction" value="No" required style="margin-right:5px;" onchange="toggleFelonyDetails()">No
					</label>
				</div>
				<div id="felony_details_container" style="display:none; margin-top:15px; margin-left:20px;">
					<label for="felony_details" class="required" style="display:block; margin-bottom:5px; font-weight:500;">Please provide details:</label>
					<textarea id="felony_details" name="felony_details" rows="4" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px; font-family:Arial, sans-serif;"></textarea>
				</div>
			</div>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Have you ever had any convictions as set forth above placed on the ste or inactive docket?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="inactive_docket" value="Yes" required style="margin-right:5px;" onchange="toggleInactiveDocketDetails()">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="inactive_docket" value="No" required style="margin-right:5px;" onchange="toggleInactiveDocketDetails()">No
					</label>
				</div>
				<div id="inactive_docket_details_container" style="display:none; margin-top:15px; margin-left:20px;">
					<label for="inactive_docket_details" class="required" style="display:block; margin-bottom:5px; font-weight:500;">Please provide details:</label>
					<textarea id="inactive_docket_details" name="inactive_docket_details" rows="4" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px; font-family:Arial, sans-serif;"></textarea>
				</div>
			</div>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Have you ever had a restraining order taken out against you or been convicted of domestic abuse?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="restraining_order" value="Yes" required style="margin-right:5px;" onchange="toggleRestrainingOrderDetails()">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="restraining_order" value="No" required style="margin-right:5px;" onchange="toggleRestrainingOrderDetails()">No
					</label>
				</div>
				<div id="restraining_order_details_container" style="display:none; margin-top:15px; margin-left:20px;">
					<label for="restraining_order_details" class="required" style="display:block; margin-bottom:5px; font-weight:500;">Please provide details:</label>
					<textarea id="restraining_order_details" name="restraining_order_details" rows="4" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px; font-family:Arial, sans-serif;"></textarea>
				</div>
			</div>
			
			<div style="margin-bottom:20px;">
				<label style="display:block; margin-bottom:8px; font-weight:bold;">Can you legally own or purchase a regulated firearm in your state of residence?</label>
				<div style="display:flex; gap:20px; margin-left:20px;">
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="firearm_legal" value="Yes" required style="margin-right:5px;" onchange="toggleFirearmLegalDetails()">Yes
					</label>
					<label style="font-weight:normal; cursor:pointer;">
						<input type="radio" name="firearm_legal" value="No" required style="margin-right:5px;" onchange="toggleFirearmLegalDetails()">No
					</label>
				</div>
				<div id="firearm_legal_details_container" style="display:none; margin-top:15px; margin-left:20px;">
					<label for="firearm_legal_details" class="required" style="display:block; margin-bottom:5px; font-weight:500;">Please provide details:</label>
					<textarea id="firearm_legal_details" name="firearm_legal_details" rows="4" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px; font-family:Arial, sans-serif;"></textarea>
				</div>
			</div>
		</div>
		
		<div class="form-section">
			<div class="section-title">Application Fee</div>
			<p style="margin-bottom:20px; color:#555; font-style:italic;">A non-refundable $75 application fee is required. Please complete your payment below before submitting your application.</p>
			
			<div style="text-align:center; padding:20px; background-color:#fff; border:2px solid #384839; border-radius:8px; margin-bottom:20px;">
				<script async src="https://js.stripe.com/v3/buy-button.js"></script>
				<stripe-buy-button
				  buy-button-id="buy_btn_1PHuHFIV1towFm0N7uKLzPeQ"
				  publishable-key="pk_live_1cVXpN6uAIaJe33hPtDynqAU"
				>
				</stripe-buy-button>
			</div>
			
			<div style="margin-top:20px; padding:15px; background-color:#fff3cd; border:1px solid #ffc107; border-radius:4px;">
				<label style="display:flex; align-items:center; cursor:pointer; font-weight:bold;">
					<input type="checkbox" id="payment_confirmation" style="margin-right:10px; width:20px; height:20px; cursor:pointer;" onchange="toggleSubmitButton()">
					<span>I confirm that I have completed the $75 application fee payment above</span>
				</label>
			</div>
			
			<div style="margin-top:15px; padding:15px; background-color:#e7f3ff; border:1px solid #2196F3; border-radius:4px;">
				<label style="display:flex; align-items:center; cursor:pointer; font-weight:bold;">
					<input type="checkbox" id="waiver_agreement" required style="margin-right:10px; width:20px; height:20px; cursor:pointer;" onclick="openWaiverModal(event)">
					<span>I have read and agree to the liability waiver</span>
				</label>
			</div>
		</div>
			
		<div class="button-container">
			<button type="submit" id="submitButton" disabled style="opacity:0.5; cursor:not-allowed;">Submit Application</button>
		</div>
	</form>
</div>

<!-- Liability Waiver Modal -->
<div id="waiverModal" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.5);">
	<div style="background-color:#fefefe; margin:5% auto; padding:30px; border-radius:8px; width:90%; max-width:800px; box-shadow:0 4px 20px rgba(0,0,0,0.3);">
		<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
			<h2 style="color:#384839; margin:0;">Liability Waiver</h2>
			<span onclick="closeWaiverModal()" style="color:#aaa; font-size:32px; font-weight:bold; cursor:pointer; line-height:20px;">&times;</span>
		</div>
		<div style="max-height:400px; overflow-y:auto; padding:20px; background-color:#f9f9f9; border:1px solid #ddd; border-radius:4px; margin-bottom:20px;">
			<p style="line-height:1.8; color:#333; text-align:justify;">
				Participant, including parent or legal guardian of participant under 18 (hereinafter "Undersigned"), agrees to indemnify, hold harmless and defend Dug Hill Rod & Gun Club, Inc. and any of its members, directors, officers or agents (hereinafter "DHRGC"), from any and all fault, liabilities, costs, expenses, claims, demands or lawsuits arising out of, related to or connected with activities involving the use or discharge of firearms, archery equipment, hunting and hunting equipment, or other related outdoor equipment or activities (hereinafter "Shooting Sports"); the Undersigned's participation in a course of instruction (hereinafter "Education"), Shooting Sports activity, or DHRGC event; the range, buildings, land and premises used for Education, Shooting Sports, or DHRGC event (hereinafter the "Premises"); the Undersigned's presence on or use of said Premises; and any and all acts or omissions of the Undersigned. And should any such claim, demand or lawsuit arise or be asserted in any way whatsoever related thereto, whether arising under the laws of the United States or of any State, or under any theory of law or equity, the Undersigned will indemnify, hold harmless and defend DHRGC, from any and all costs, expenses or liability including, but not limited to, attorney fees, court costs, arbitration fees or costs, the cost of any settlement or judgment made or rendered against DHRGC, whether individually, jointly, or in solido with the Undersigned, together with all costs of court and other costs or expenses incurred in connection with any such claim, demand or lawsuit, including attorney's fees.
			</p>
			<p style="line-height:1.8; color:#333; text-align:justify; margin-top:15px;">
				The Undersigned furthermore waives for himself/herself and his/her executors, administrators, assignees, guests, or heirs, any and all rights and claims for damages, losses, demands and any other actions whatsoever, which he/she may have or which may arise against DHRGC, (including, but not limited to any and all injuries, damages or illnesses suffered by the Undersigned or the Undersigned's property), which may, in any way whatsoever, arise out of, be related to or be connected with: Shooting Sports; Education; the Premises, including any latent defect in the Premises; the Undersigned's presence on or use of said Premises; the Undersigned's property (whether or not entrusted to DHRGC); and the use or discharge of firearms, archery equipment, hunting equipment, or other related outdoor equipment. DHRGC shall not be liable for, and the Undersigned, on behalf of himself/herself and his/her executors, administrators, assignees, or heirs, hereby expressly releases DHRGC from any and all such claims.
			</p>
			<p style="line-height:1.8; color:#333; text-align:justify; margin-top:15px;">
				The Undersigned understands that they are not in any way required to enter the Premises or participate in any Shooting Sports or Education activities and hereby expressly assumes the risk of entering the Premises and of taking part in activities on the Premises which include, but are not limited to, Shooting Sports, Education, and the firing of live ammunition.
			</p>
			<p style="line-height:1.8; color:#333; text-align:justify; margin-top:15px; font-weight:bold;">
				This instrument binds the Undersigned and his / her executors, administrators, assignees, or heirs. By signing, I acknowledge and agree to the above terms and conditions.
			</p>
		</div>
		<div style="text-align:center;">
			<button onclick="acceptWaiver()" style="background-color:#5a7a5c; color:white; padding:12px 40px; border:none; border-radius:4px; font-size:16px; cursor:pointer; margin-right:10px;">I Agree</button>
			<button onclick="closeWaiverModal()" style="background-color:#999; color:white; padding:12px 40px; border:none; border-radius:4px; font-size:16px; cursor:pointer;">Cancel</button>
		</div>
	</div>
</div>

<script>
function toggleFelonyDetails() {
	const yesRadio = document.querySelector('input[name="felony_conviction"][value="Yes"]');
	const detailsContainer = document.getElementById('felony_details_container');
	const detailsTextarea = document.getElementById('felony_details');
	
	if (yesRadio.checked) {
		detailsContainer.style.display = 'block';
		detailsTextarea.required = true;
	} else {
		detailsContainer.style.display = 'none';
		detailsTextarea.required = false;
		detailsTextarea.value = '';
	}
}

function toggleInactiveDocketDetails() {
	const yesRadio = document.querySelector('input[name="inactive_docket"][value="Yes"]');
	const detailsContainer = document.getElementById('inactive_docket_details_container');
	const detailsTextarea = document.getElementById('inactive_docket_details');
	
	if (yesRadio.checked) {
		detailsContainer.style.display = 'block';
		detailsTextarea.required = true;
	} else {
		detailsContainer.style.display = 'none';
		detailsTextarea.required = false;
		detailsTextarea.value = '';
	}
}

function toggleRestrainingOrderDetails() {
	const yesRadio = document.querySelector('input[name="restraining_order"][value="Yes"]');
	const detailsContainer = document.getElementById('restraining_order_details_container');
	const detailsTextarea = document.getElementById('restraining_order_details');
	
	if (yesRadio.checked) {
		detailsContainer.style.display = 'block';
		detailsTextarea.required = true;
	} else {
		detailsContainer.style.display = 'none';
		detailsTextarea.required = false;
		detailsTextarea.value = '';
	}
}

function toggleFirearmLegalDetails() {
	const noRadio = document.querySelector('input[name="firearm_legal"][value="No"]');
	const detailsContainer = document.getElementById('firearm_legal_details_container');
	const detailsTextarea = document.getElementById('firearm_legal_details');
	
	if (noRadio.checked) {
		detailsContainer.style.display = 'block';
		detailsTextarea.required = true;
	} else {
		detailsContainer.style.display = 'none';
		detailsTextarea.required = false;
		detailsTextarea.value = '';
	}
}

function formatPhone(input) {
	// Remove all non-numeric characters
	let value = input.value.replace(/\D/g, '');
	
	// Limit to 10 digits
	value = value.substring(0, 10);
	
	// Format as (XXX) XXX-XXXX
	if (value.length >= 6) {
		input.value = '(' + value.substring(0, 3) + ') ' + value.substring(3, 6) + '-' + value.substring(6);
	} else if (value.length >= 3) {
		input.value = '(' + value.substring(0, 3) + ') ' + value.substring(3);
	} else if (value.length > 0) {
		input.value = '(' + value;
	}
}

function openWaiverModal(event) {
	event.preventDefault();
	const checkbox = event.target;
	// Uncheck the box - user must agree in modal
	checkbox.checked = false;
	document.getElementById('waiverModal').style.display = 'block';
}

function closeWaiverModal() {
	document.getElementById('waiverModal').style.display = 'none';
}

function acceptWaiver() {
	document.getElementById('waiver_agreement').checked = true;
	closeWaiverModal();
}

function toggleSubmitButton() {
	const checkbox = document.getElementById('payment_confirmation');
	const submitButton = document.getElementById('submitButton');
	
	if (checkbox.checked) {
		submitButton.disabled = false;
		submitButton.style.opacity = '1';
		submitButton.style.cursor = 'pointer';
	} else {
		submitButton.disabled = true;
		submitButton.style.opacity = '0.5';
		submitButton.style.cursor = 'not-allowed';
	}
}

// Add event listeners to phone fields
document.addEventListener('DOMContentLoaded', function() {
	const phoneFields = document.querySelectorAll('#phone, #phone2');
	phoneFields.forEach(field => {
		field.addEventListener('input', function() {
			formatPhone(this);
		});
	});
});
</script>
</body>
</html>

